{
  "version": 3,
  "sources": [
    "../../../../app/routes/posts/$postId.edit.jsx"
  ],
  "sourcesContent": [
    "import {\n  Form,\n  json,\n  redirect,\n  useActionData,\n  useLoaderData,\n} from \"@remix-run/node\";\nimport connectDb from \"~/db/connectDb.server.js\";\n\nexport async function loader({ params }) {\n  const db = await connectDb();\n  const post = await db.models.Post.findById(params.postId);\n  if (!post) {\n    throw new Response(`Couldn't find post with id ${params.postId}`, {\n      status: 404,\n    });\n  }\n  return json(post);\n}\n\nexport const action = async ({ request, params }) => {\n  const db = await connectDb();\n  const form = await request.formData();\n\n  const title = form.get(\"title\");\n  const language = form.get(\"language\");\n  const description = form.get(\"description\");\n  const post = form.get(\"post\");\n  const postId = params.postId;\n  console.log(\"title\", title);\n\n  try {\n    await db.models.Post.findOneAndUpdate(\n      { _id: postId },\n      {\n        $set: {\n          title: title,\n          language: language,\n          description: description,\n          post: post,\n        },\n      }\n    );\n\n    return redirect(`/posts/${postId}`);\n  } catch (error) {\n    return json(\n      { errors: error.errors, values: Object.fromEntries(form) },\n      { status: 400 }\n    );\n  }\n};\n\nexport default function PostUpdate() {\n  const actionData = useActionData();\n  const post = useLoaderData();\n\n  return (\n    <div>\n      <h1>Update current post</h1>\n      <Form method=\"post\">\n        <label htmlFor=\"title\" className=\"block\">\n          Title\n        </label>\n        <input\n          type=\"text\"\n          name=\"title\"\n          defaultValue={actionData?.values.title ?? post.title}\n          id=\"title\"\n          className={\n            actionData?.errors.title ? \"border-2 border-red-500\" : null\n          }\n        />\n        {actionData?.errors.title && (\n          <p className=\"text-red-500\">{actionData.errors.title.message}</p>\n        )}\n\n        <label htmlFor=\"language\" className=\"block\">\n          Language\n        </label>\n        <input\n          type=\"text\"\n          name=\"language\"\n          defaultValue={actionData?.values.language ?? post.language}\n          id=\"language\"\n          className={\n            actionData?.errors.language ? \"border-2 border-red-500\" : null\n          }\n        />\n        <label htmlFor=\"description\" className=\"block\">\n          Description\n        </label>\n        <textarea\n          type=\"text\"\n          name=\"description\"\n          defaultValue={actionData?.values.description ?? post.description}\n          id=\"description\"\n          className={\n            actionData?.errors.description ? \"border-2 border-red-500\" : null\n          }\n        />\n        <label htmlFor=\"post\" className=\"block\">\n          Post\n        </label>\n        <textarea\n          type=\"text\"\n          name=\"post\"\n          defaultValue={actionData?.values.post ?? post.post}\n          id=\"post\"\n          className={\n            actionData?.errors.post ? \"border-2 border-red-500\" : null\n          }\n        />\n        <br />\n        <button\n          className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-10\"\n          type=\"submit\"\n        >\n          Save\n        </button>\n      </Form>\n    </div>\n  );\n}\n"
  ],
  "mappings": ";;;;;;;;;;;;;;;AAAA,kBAMO;AACP,8BAAsB;AAPtB;AAqDe,SAAR,gBAAiC;AArDxC;AAsDE,QAAM,iBAAa,2BAAc;AACjC,QAAM,cAAU,2BAAc;AAE9B,SACE,mDAAC;AAAA,IACC;AAAA,yDAAC;AAAA,QAAG;AAAA,SAAJ;AAAA;AAAA;AAAA;AAAA,aAA0B;AAAA,MAC1B,mDAAC;AAAA,QAAK,QAAO;AAAA,QACX;AAAA,6DAAC;AAAA,YAAM,SAAQ;AAAA,YAAQ,WAAU;AAAA,YAAQ;AAAA,aAAzC;AAAA;AAAA;AAAA;AAAA,iBAEA;AAAA,UACA,mDAAC;AAAA,YACC,MAAK;AAAA,YACL,MAAK;AAAA,YACL,eAAc,8CAAY,OAAO,UAAnB,YAA4B,QAAQ;AAAA,YAClD,IAAG;AAAA,YACH,YACE,yCAAY,OAAO,SAAQ,4BAA4B;AAAA,aAN3D;AAAA;AAAA;AAAA;AAAA,iBAQA;AAAA,WACC,yCAAY,OAAO,UAClB,mDAAC;AAAA,YAAE,WAAU;AAAA,YAAgB,qBAAW,OAAO,MAAM;AAAA,aAArD;AAAA;AAAA;AAAA;AAAA,iBAA6D;AAAA,UAG/D,mDAAC;AAAA,YAAM,SAAQ;AAAA,YAAW,WAAU;AAAA,YAAQ;AAAA,aAA5C;AAAA;AAAA;AAAA;AAAA,iBAEA;AAAA,UACA,mDAAC;AAAA,YACC,MAAK;AAAA,YACL,MAAK;AAAA,YACL,eAAc,8CAAY,OAAO,aAAnB,YAA+B,QAAQ;AAAA,YACrD,IAAG;AAAA,YACH,YACE,yCAAY,OAAO,YAAW,4BAA4B;AAAA,aAN9D;AAAA;AAAA;AAAA;AAAA,iBAQA;AAAA,UACA,mDAAC;AAAA,YAAM,SAAQ;AAAA,YAAc,WAAU;AAAA,YAAQ;AAAA,aAA/C;AAAA;AAAA;AAAA;AAAA,iBAEA;AAAA,UACA,mDAAC;AAAA,YACC,MAAK;AAAA,YACL,MAAK;AAAA,YACL,eAAc,8CAAY,OAAO,gBAAnB,YAAkC,QAAQ;AAAA,YACxD,IAAG;AAAA,YACH,YACE,yCAAY,OAAO,eAAc,4BAA4B;AAAA,aANjE;AAAA;AAAA;AAAA;AAAA,iBAQA;AAAA,UACA,mDAAC;AAAA,YAAM,SAAQ;AAAA,YAAU,WAAU;AAAA,YAAQ;AAAA,aAA3C;AAAA;AAAA;AAAA;AAAA,iBAEA;AAAA,UACA,mDAAC;AAAA,YACC,MAAK;AAAA,YACL,MAAK;AAAA,YACL,eAAc,8CAAY,OAAO,YAAnB,YAA8B,QAAQ;AAAA,YACpD,IAAG;AAAA,YACH,YACE,yCAAY,OAAO,WAAU,4BAA4B;AAAA,aAN7D;AAAA;AAAA;AAAA;AAAA,iBAQA;AAAA,UACA,mDAAC,UAAD;AAAA;AAAA;AAAA;AAAA,iBAAI;AAAA,UACJ,mDAAC;AAAA,YACC,WAAU;AAAA,YACV,MAAK;AAAA,YACN;AAAA,aAHD;AAAA;AAAA;AAAA;AAAA,iBAKA;AAAA;AAAA,SA3DF;AAAA;AAAA;AAAA;AAAA,aA4DA;AAAA;AAAA,KA9DF;AAAA;AAAA;AAAA;AAAA,SA+DA;AAEJ;",
  "names": []
}
